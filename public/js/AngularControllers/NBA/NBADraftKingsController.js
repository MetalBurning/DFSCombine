!function(a){function e(r){if(l[r])return l[r].exports;var o=l[r]={i:r,l:!1,exports:{}};return a[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var l={};return e.m=a,e.c=l,e.i=function(a){return a},e.d=function(a,e,l){Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:l})},e.n=function(a){var l=a&&a.__esModule?function(){return a["default"]}:function(){return a};return e.d(l,"a",l),l},e.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},e.p="",e(e.s=0)}([function(a,e){angular.module("NBAApp").controller("NBAController",["$http","$scope","$filter","$uibModal","$window",function(a,e,l,r,o){var t=this;e.alerts=[{type:"info",msg:"Please Upload/Load Players...",number:1}],e._Positions=[],e._AllTeams=[],e._AllWeeks=[],e._AllPlayersMASTER=[],e._AllPlayers=[],e._AllReadPlayerIDs=[],e._AllStacks=[],e._PGPlayerPool=[],e._SGPlayerPool=[],e._SFPlayerPool=[],e._PFPlayerPool=[],e._CPlayerPool=[],e._GPlayerPool=[],e._FPlayerPool=[],e._UTILPlayerPool=[],e._AllDisplayedDraftData=[],e._AllDraftData=[],e.TotalPossibleDrafts=0,e.TotalValidDrafts=0,e.SelectedValidDrafts=!0,e.sortTypeDraft="FPPG",e.sortType="_Salary",e.sortReverse=!0,e.sortReverseDraft=!0,e.SelectedPosition="PG",e.SelectedTeam="All",e.SelectedStackPositions=[],e.SelectedDraft=null,t.removeDups=!0,e.AVERAGE=parseFloat(-1),e.STDEVIATION=parseFloat(-1),e.TopRange=-1,e.BottomRange=-1,t.ERRORRATE=.00157,t.TopLimit=150,t.TopRange=-1,t.BottomRange=-1,e.savedPastSettings=[],e.currentRead=null,e._AllPlayers=l("team")(e._AllPlayers,e.SelectedTeam),e._AllPlayers=l("positionDK")(e._AllPlayers,e.SelectedPosition),e.mainTabHeading="Players",e.DeleteConfirmationID=-1;e.displayNewMessage=function(a,l){o.scrollTo(0,0),e.addAlert(a,l)},e.addAlert=function(a,l){var r=1;e.alerts.length>100&&(e.alerts=[]),e.alerts.forEach(function(e){e.type==a&&e.msg==l&&r++}),l.indexOf("Unauthenticated")!==-1?e.alerts.push({type:a,msg:l,number:r,login:!0}):e.alerts.push({type:a,msg:l,number:r,login:!1})},e.closeAlert=function(a){e.alerts.splice(a,1)},e.loadDKPlayers=function(l){e.clearPlayerPools(),e.clearDrafts(),e.clearAllPlayers(),e.clearAllPlayerFilters(),e.currentRead=null,e.mainTabHeading="Players";var r=new FormData;r.append("csvFile",l.target.files[0]),a.post("/NBA/loadDraftKingsPlayers",r,{headers:{"Content-Type":void 0,transformRequest:angular.identity}}).then(function(a){a.data.forEach(function(a){a._Salary=parseFloat(a._Salary),a._FPPG=parseFloat(a._FPPG),a._FPPG=a._FPPG.toFixed(2),a._FPPG=parseFloat(a._FPPG);var l=parseFloat((a._FPPG/a._Salary).toFixed(5));a._ProjectedPointsPerDollar=l,"O"==a._playerInjured?a._playerInjured="danger":"GTD"==a._playerInjured&&(a._playerInjured="warning"),0==e._AllTeams.length?e._AllTeams.push(a._Team):e._AllTeams.indexOf(a._Team)==-1&&e._AllTeams.push(a._Team),e._AllPlayers.push(a),e._AllPlayersMASTER.push(a)}),e._AllPlayers.length>0&&e.displayNewMessage("success","Players have been successfully loaded")},function(a){e.displayNewMessage("danger","Error: Players could not be loaded.")}),angular.forEach(angular.element("input[type='file']"),function(a){angular.element(a).val(null)})},e.loadDraftKingsFPPG=function(l){var r=new FormData;r.append("csvFile",l.target.files[0]),a.post("/NBA/loadDraftKingsFPPG",r,{headers:{"Content-Type":void 0,transformRequest:angular.identity}}).then(function(a){a.data.forEach(function(a){e._AllPlayers.forEach(function(e){if(e._Name===a._Name&&e._Salary===parseInt(a._Salary)&&parseFloat(e._FPPG)<=0){e._FPPG=parseFloat(a._FPPG);var l=parseFloat((e._FPPG/e._Salary).toFixed(5));e._ProjectedPointsPerDollar=l}})})},function(a){e.displayNewMessage("danger","Error: Players could not be loaded.")}),angular.forEach(angular.element("input[type='file']"),function(a){angular.element(a).val(null)})},e.selectTopActualPlayers=function(){if(e.clearPlayerPools(),0!==e._AllPlayers.length)for(var a=l("orderBy")(e._AllPlayers,"_ActualFantasyPoints",!0),r=l("positionDK")(a,"PG"),o=l("positionDK")(a,"SG"),t=l("positionDK")(a,"SF"),n=l("positionDK")(a,"PF"),s=l("positionDK")(a,"C"),i=l("positionDK")(a,"G"),P=l("positionDK")(a,"F"),f=l("positionDK")(a,"UTIL"),d=0;d<4;d++)r.length>=d&&e.addPlayerToPool(r[d],"PG"),o.length>=d&&e.addPlayerToPool(o[d],"SG"),t.length>=d&&e.addPlayerToPool(t[d],"SF"),n.length>=d&&e.addPlayerToPool(n[d],"PF"),s.length>=d&&e.addPlayerToPool(s[d],"C"),i.length>=d&&e.addPlayerToPool(i[d],"G"),P.length>=d&&e.addPlayerToPool(P[d],"F"),f.length>=d&&e.addPlayerToPool(f[d],"UTIL")},e.setAndUnsetPosition=function(a){e.SelectedPosition=a},e.updatePlayerPtsPerDollar=function(a){var l=e._AllPlayers.indexOf(a);l!==-1&&(e._AllPlayers[l]._ProjectedPointsPerDollar=parseFloat(a._FPPG/a._Salary).toFixed(5),a._ProjectedPointsPerDollar=parseFloat(a._FPPG/a._Salary).toFixed(5))},e.selectTopFPPGPlayers=function(){if(e.clearPlayerPools(),0!==e._AllPlayers.length){for(var a=l("orderBy")(e._AllPlayers,"_FPPG",!0),r=l("removeInjured")(a),o=l("positionDK")(r,"PG"),t=l("positionDK")(r,"SG"),n=l("positionDK")(r,"SF"),s=l("positionDK")(r,"PF"),i=l("positionDK")(r,"C"),P=l("positionDK")(r,"G"),f=l("positionDK")(r,"F"),d=l("positionDK")(r,"UTIL"),y=l("orderBy")(e._AllPlayers,"_ProjectedPointsPerDollar",!0),c=l("removeInjured")(y),_=l("positionDK")(c,"PG"),u=l("positionDK")(c,"SG"),p=l("positionDK")(c,"SF"),D=l("positionDK")(c,"PF"),h=l("positionDK")(c,"C"),g=l("positionDK")(c,"G"),F=l("positionDK")(c,"F"),v=l("positionDK")(c,"UTIL"),T=0;T<o.length;T++)0!=T&&1!=T&&2!=T&&3!=T||e.addPlayerToPool(o[T],"PG");for(var T=0;T<_.length;T++)0==T&&e.addPlayerToPool(_[T],"PG");for(var T=0;T<t.length;T++)0!=T&&1!=T&&2!=T&&3!=T||e.addPlayerToPool(t[T],"SG");for(var T=0;T<u.length;T++)0==T&&e.addPlayerToPool(u[T],"SG");for(var T=0;T<n.length;T++)0!=T&&1!=T&&2!=T&&3!=T||e.addPlayerToPool(n[T],"SF");for(var T=0;T<p.length;T++)0==T&&e.addPlayerToPool(p[T],"SF");for(var T=0;T<s.length;T++)0!=T&&1!=T&&2!=T&&3!=T||e.addPlayerToPool(s[T],"PF");for(var T=0;T<D.length;T++)0==T&&e.addPlayerToPool(D[T],"PF");for(var T=0;T<i.length;T++)0!=T&&1!=T&&2!=T&&3!=T||e.addPlayerToPool(i[T],"C");for(var T=0;T<h.length;T++)0==T&&e.addPlayerToPool(h[T],"C");for(var T=0;T<P.length;T++)0==T&&e.addPlayerToPool(P[T],"G");for(var T=0;T<g.length;T++)0!=T&&1!=T&&3!=T||e.addPlayerToPool(g[T],"G");for(var T=0;T<f.length;T++)0==T&&e.addPlayerToPool(f[T],"F");for(var T=0;T<F.length;T++)0!=T&&1!=T&&3!=T||e.addPlayerToPool(F[T],"F");for(var T=0;T<d.length;T++)0==T&&e.addPlayerToPool(d[T],"UTIL");for(var T=0;T<v.length;T++)0!=T&&1!=T&&3!=T||e.addPlayerToPool(v[T],"UTIL")}},e.parseFloat=function(a){return parseFloat(a)},e.clearAllPlayers=function(){e._AllPlayers=[],e._AllPlayersMASTER=[],e._AllTeams=[],e._Positions=[]},e.changeLineups=function(e){for(var l=new FormData,r=0;r<e.length;r++)l.append(e[r].name,e[r]);a.post("/api/NBA/changeLineups",l,{headers:{"Content-Type":void 0,transformRequest:angular.identity}}).then(function(a){},function(a){})},e.getPointsPerDollar=function(a){var e=0;return e=a._FPPG/a._Salary,e=e.toFixed(5),e=parseFloat(e)},e.resetMessage=function(){e._Message.hasData=!1,e._Message.messageType="info",e._Message.message=""},e.addRemoveTeam=function(a){e.SelectedTeam===a?e.SelectedTeam="All":e.SelectedTeam=a},e.addRemoveWeek=function(a){var l=e.SelectedWeeks.indexOf(a);l>-1?e.SelectedWeeks.splice(l,1):e.SelectedWeeks.push(a)},e.setDraftSortTypeAndReverse=function(a){if(e.sortTypeDraft=a,e.sortReverseDraft=!e.sortReverseDraft,e._AllDraftData=l("orderBy")(e._AllDraftData,e.sortTypeDraft,e.sortReverseDraft),e._AllDisplayedDraftData=[],e._AllDraftData.length>150)for(var r=0;r<150;r++)e._AllDisplayedDraftData.push(e._AllDraftData[r]);else for(var r=0;r<e._AllDraftData.length;r++)e._AllDisplayedDraftData.push(e._AllDraftData[r])},e.DownloadDraftCSV=function(){if(0==e._AllDraftData.length)return void e.displayNewMessage("danger","Error: Cannot downloaded drafts when none have been generated");var a="data:text/csv;charset=utf-8,",r=e._AllDraftData;r=l("checkValidOnly")(r,!0),r=l("orderBy")(r,e.sortTypeDraft,e.sortReverseDraft),a+="PG,SG,SF,PF,C,G,F,UTIL\n",r.forEach(function(e){for(var l="",r=0;r<e.players.length;r++)0==r?l+=e.players[r].playerID:l=l+","+e.players[r].playerID;a=a+l+"\n"});var o=angular.element("<a/>");o.css({display:"none"}),angular.element(document.body).append(o);var t="";e._AllTeams.forEach(function(a){t=0==t.length?a:t+"_"+a}),o.attr({href:encodeURI(a),target:"_blank",download:t+".csv"})[0].click(),o.remove()},e.removePlayerFromPool=function(a,l){switch(l){case"PG":e._PGPlayerPool.splice(e._PGPlayerPool.indexOf(a),1);break;case"SG":e._SGPlayerPool.splice(e._SGPlayerPool.indexOf(a),1);break;case"SF":e._SFPlayerPool.splice(e._SFPlayerPool.indexOf(a),1);break;case"PF":e._PFPlayerPool.splice(e._PFPlayerPool.indexOf(a),1);break;case"C":e._CPlayerPool.splice(e._CPlayerPool.indexOf(a),1);break;case"G":e._GPlayerPool.splice(e._GPlayerPool.indexOf(a),1);break;case"F":e._FPlayerPool.splice(e._FPlayerPool.indexOf(a),1);break;case"UTIL":e._UTILPlayerPool.splice(e._UTILPlayerPool.indexOf(a),1)}},e.addPlayerToPool=function(a,l){if(!e.playerInPool(a,l))switch(l){case"PG":e._PGPlayerPool.push(a);break;case"SG":e._SGPlayerPool.push(a);break;case"SF":e._SFPlayerPool.push(a);break;case"PF":e._PFPlayerPool.push(a);break;case"C":e._CPlayerPool.push(a);break;case"G":e._GPlayerPool.push(a);break;case"F":e._FPlayerPool.push(a);break;case"UTIL":e._UTILPlayerPool.push(a)}},e.playerInPool=function(a,l){switch(l){case"PG":if(e._PGPlayerPool.indexOf(a)>-1)return!0;break;case"SG":if(e._SGPlayerPool.indexOf(a)>-1)return!0;break;case"SF":if(e._SFPlayerPool.indexOf(a)>-1)return!0;break;case"PF":if(e._PFPlayerPool.indexOf(a)>-1)return!0;break;case"C":if(e._CPlayerPool.indexOf(a)>-1)return!0;break;case"G":if(e._GPlayerPool.indexOf(a)>-1)return!0;break;case"F":if(e._FPlayerPool.indexOf(a)>-1)return!0;break;case"UTIL":if(e._UTILPlayerPool.indexOf(a)>-1)return!0}return!1},e.clearPlayerPools=function(){e._PGPlayerPool=[],e._SGPlayerPool=[],e._SFPlayerPool=[],e._PFPlayerPool=[],e._CPlayerPool=[],e._GPlayerPool=[],e._FPlayerPool=[],e._UTILPlayerPool=[]},e.averagePlayerPoolSalary=function(a){if(0==a.length)return 0;var e=0;return a.forEach(function(a){e+=a._Salary}),Math.round(e/a.length,0)},e.removeDraft=function(a){e._AllDisplayedDraftData.splice(e._AllDisplayedDraftData.indexOf(a),1);var l=e._AllDraftData.indexOf(a);e._AllDraftData[l].players.forEach(function(a){var l=e._AllPlayers.indexOf(a);e._AllPlayers[l]._TimesInDrafts-=1,e._AllPlayers[l]._TimesInValidDrafts-=1}),e._AllDraftData.splice(l,1),e._AllPlayers.forEach(function(a){e.setPlayerPercentInDraft(a)}),e.TotalPossibleDrafts=e._AllDraftData.length,e.TotalValidDrafts=e.TotalPossibleDrafts},e.removeAllButTopN=function(){if(e._AllDraftData=l("orderBy")(e._AllDraftData,e.sortTypeDraft,!0),e._AllDraftData.length>t.TopLimit){for(var a=[],r=0;r<t.TopLimit;r++){if(a.push(e._AllDraftData[r]),0===r)for(var o=0;o<e._AllPlayers.length;o++)e._AllPlayers[o]._TimesInDrafts=0,e._AllPlayers[o]._TimesInValidDrafts=0;e._AllDraftData[r].players.forEach(function(a){var l=e._AllPlayers.indexOf(a);e._AllPlayers[l]._TimesInDrafts+=1,e._AllPlayers[l]._TimesInValidDrafts+=1})}e._AllDraftData=a,e.TotalPossibleDrafts=e._AllDraftData.length,e.TotalValidDrafts=e.TotalPossibleDrafts,e._AllPlayers.forEach(function(a){e.setPlayerPercentInDraft(a)}),e._AllDisplayedDraftData=[];for(var n=0;n<t.TopLimit;n++)e._AllDisplayedDraftData.push(e._AllDraftData[n])}},e.clearDrafts=function(){e._AllDraftData=[],e.TotalPossibleDrafts=0,e.TotalValidDrafts=0,e._AllPlayers.forEach(function(a){a._TimesInDrafts=0,a._TimesInValidDrafts=0})},e.buildDrafts=function(){if(0==e._PGPlayerPool.length||0==e._SGPlayerPool.length||0==e._SFPlayerPool.length||0==e._PFPlayerPool.length||0==e._CPlayerPool.length||0==e._GPlayerPool.length||0==e._FPlayerPool.length||0==e._UTILPlayerPool.length)return void e.displayNewMessage("danger","Error: One or more player pools contain zero players");e.clearDrafts(),e.setPlayerRanking();var r=e._PGPlayerPool.length*e._SGPlayerPool.length*e._SFPlayerPool.length*e._PFPlayerPool.length*e._CPlayerPool.length*e._GPlayerPool.length*e._FPlayerPool.length*e._UTILPlayerPool.length;if(!(r>3e4)||confirm("Creating "+r+" possible drafts can take longer than expected. It can crash your session if loaded with to much memory, save your data. Are you sure you want to create?")){var o=[];if(e._PGPlayerPool.forEach(function(a){var l={};l.PG=a,e._SGPlayerPool.forEach(function(a){l.SG=a,e._SFPlayerPool.forEach(function(a){l.SF=a,e._PFPlayerPool.forEach(function(a){l.PF=a,e._CPlayerPool.forEach(function(a){l.C=a,e._GPlayerPool.forEach(function(a){l.G=a,e._FPlayerPool.forEach(function(a){l.F=a,e._UTILPlayerPool.forEach(function(a){l.UTIL=a;var r=[];r.push(l.PG),r.push(l.SG),r.push(l.SF),r.push(l.PF),r.push(l.C),r.push(l.G),r.push(l.F),r.push(l.UTIL);var n=[];if(n.push(l.PG._Name),n.push(l.SG._Name),n.push(l.SF._Name),n.push(l.PF._Name),n.push(l.C._Name),n.push(l.G._Name),n.push(l.F._Name),n.push(l.UTIL._Name),e.isDraftTeamValid(r)&&e.isDraftSalaryValid(r)&&!e.doesDraftHaveDupPlayers(r)){var s={FPPG:parseFloat(e.getDraftFPPG(r)),Actual:parseFloat(e.getDraftActual(r)),validTeam:e.isDraftTeamValid(r),validSalary:e.isDraftSalaryValid(r),salaryLeft:parseInt(e.getDraftSalaryLeft(r)),playerNames:n,playersPositionData:angular.copy(l),players:r,displayDetails:!1,pointsPerDollar:parseFloat(e.averageValue(r)),averageRank:parseFloat(e.averageRank(r))};if(t.removeDups){var i=!1;if(o.length>0){for(var P=o.length-1;P>=0;P--){var f=0;if(n.indexOf(o[P][0])!==-1&&f++,n.indexOf(o[P][1])!==-1&&f++,n.indexOf(o[P][2])!==-1&&f++,n.indexOf(o[P][3])!==-1&&f++,n.indexOf(o[P][4])!==-1&&f++,n.indexOf(o[P][5])!==-1&&f++,n.indexOf(o[P][6])!==-1&&f++,n.indexOf(o[P][7])!==-1&&f++,8===f){i=!0;break}}i||(e._AllDraftData.push(s),o.push(n))}else e._AllDraftData.push(s),o.push(n)}else e._AllDraftData.push(s),o.push(n)}})})})})})})})}),a.post("/NBA/buildDraft",{builtDrafts:e._AllDraftData.length}).then(function(a){},function(a){return void 0!==a.data.error?(e._AllDisplayedDraftData=[],e._AllDraftData=[],void e.displayNewMessage("danger","Build Failed, "+a.data.error)):void e.displayNewMessage("danger","Loading Single Saves - Failed")}),e.TotalPossibleDrafts=e._AllDraftData.length,e.TotalValidDrafts=e.TotalPossibleDrafts,e._AllDraftData=l("orderBy")(e._AllDraftData,e.sortTypeDraft,!0),e._AllDisplayedDraftData=[],e._AllDraftData.length>150)for(var n=0;n<150;n++)e._AllDisplayedDraftData.push(e._AllDraftData[n]);else for(var n=0;n<e._AllDraftData.length;n++)e._AllDisplayedDraftData.push(e._AllDraftData[n]);e._AllPlayers.forEach(function(a){e.setPlayerPercentInDraft(a)})}},e.setPlayerRanking=function(){var a=l("orderBy")(e._AllPlayers,"_FPPG",!0),r=l("removeInjured")(a),o=l("positionDK")(r,"PG"),t=l("positionDK")(r,"SG"),n=l("positionDK")(r,"SF"),s=l("positionDK")(r,"PF"),i=l("positionDK")(r,"C");e._AllPlayers.forEach(function(a){var e=[];a._Position.indexOf("PG")!==-1&&e.push(o.indexOf(a)+1),a._Position.indexOf("SG")!==-1&&e.push(t.indexOf(a)+1),a._Position.indexOf("SF")!==-1&&e.push(n.indexOf(a)+1),a._Position.indexOf("PF")!==-1&&e.push(s.indexOf(a)+1),a._Position.indexOf("C")!==-1&&e.push(i.indexOf(a)+1);var l=0;e.forEach(function(a){l+=a}),a._Rank=parseInt(l/e.length)})},e.addSalaryImpliedPts=function(){e._AllPlayers.forEach(function(a){a._FPPG=.004*a._Salary,a._FPPG=a._FPPG.toFixed(1),a._FPPG=parseFloat(a._FPPG),e.updatePlayerPtsPerDollar(a)})},e.averageRank=function(a){var e=0;return a.forEach(function(a){e+=a._Rank}),e=parseFloat(e/a.length),e.toFixed(2)},e.averageValue=function(a){var e=0;return a.forEach(function(a){e=parseFloat(e)+parseFloat(a._ProjectedPointsPerDollar)}),e=parseFloat(e),(e/a.length).toFixed(5)},e.getDraftSalaryLeft=function(a){var e=5e4;return a.forEach(function(a){e-=a._Salary}),e=parseInt(e)},e.getPlayerPercentInPosition=function(a,l){if(e.TotalValidDrafts>0){var r=0;return e._AllDraftData.forEach(function(e){e.playersPositionData[l]._Name===a._Name&&r++}),(r/e.TotalValidDrafts*100).toFixed(0)}return 0},e.setPlayerPercentInDraft=function(a){e.SelectedValidDrafts?a._PercentInDrafts=(a._TimesInValidDrafts/e.TotalValidDrafts*100).toFixed(0):a._PercentInDrafts=(a._TimesInDrafts/e.TotalPossibleDrafts*100).toFixed(0)},e.removeCalcDrafts=function(){var a=l("removeCalcDraft")(e._AllDraftData,parseFloat(t.TopRange),parseFloat(t.BottomRange),e.sortTypeDraft);e._AllDraftData=a,e.TotalPossibleDrafts=e._AllDraftData.length;var r=l("checkValidOnly")(e._AllDraftData,!0);if(e.TotalValidDrafts=r.length,e._AllPlayers.forEach(function(a){a._TimesInDrafts=0,a._TimesInValidDrafts=0}),r.forEach(function(a){a.players.forEach(function(a){var l=e._AllPlayers.indexOf(a);e._AllPlayers[l]._TimesInValidDrafts+=1})}),e._AllPlayers.forEach(function(a){e.setPlayerPercentInDraft(a)}),e._AllDisplayedDraftData=[],e._AllDraftData.length>150)for(var o=0;o<150;o++)e._AllDisplayedDraftData.push(e._AllDraftData[o]);else for(var o=0;o<e._AllDraftData.length;o++)e._AllDisplayedDraftData.push(e._AllDraftData[o])},e.getDraftSalaryRemaining=function(a){var e=6e4;return a.players.forEach(function(a){e-=a._Salary}),e},e.keepThisDraftSalary=function(a,e,r,o,t,n,s){for(var i=1300,P=l("orderBy")(s.players,"_FPPG",!0),f=l("positionDK")(P,"PG"),d=l("positionDK")(P,"SG"),y=l("positionDK")(P,"SF"),c=l("positionDK")(P,"PF"),_=l("positionDK")(P,"C"),u=f[0]._Salary,p=f[1]._Salary,D=d[0]._Salary,h=d[1]._Salary,g=y[0]._Salary,F=y[1]._Salary,v=c[0]._Salary,T=c[1]._Salary,A=_[0]._Salary,S=0;S<a.length;S++){var m=!1,G=Math.abs(a[S].PG1-u);G>i&&(m=!0);var b=Math.abs(a[S].PG2-p);b>i&&(m=!0);var I=Math.abs(a[S].SG1-D);I>i&&(m=!0);var x=Math.abs(a[S].SG2-h);x>i&&(m=!0);var O=Math.abs(a[S].SF1-g);O>i&&(m=!0);var M=Math.abs(a[S].SF2-F);M>i&&(m=!0);var C=Math.abs(a[S].PF1-v);C>i&&(m=!0);var E=Math.abs(a[S].PF2-T);E>i&&(m=!0);var R=Math.abs(a[S].C-A);if(R>i&&(m=!0),!m)return!0}return!1},e.keepThisDraftFPPG=function(a,e,r,o,t,n,s){for(var i=5,P=l("orderBy")(s.players,"_FPPG",!0),f=l("position")(P,"PG"),d=l("position")(P,"SG"),y=l("position")(P,"SF"),c=l("position")(P,"PF"),_=l("position")(P,"C"),u=f[0]._FPPG,p=f[1]._FPPG,D=d[0]._FPPG,h=d[1]._FPPG,g=y[0]._FPPG,F=y[1]._FPPG,v=c[0]._FPPG,T=c[1]._FPPG,A=_[0]._FPPG,S=0;S<a.length;S++){var m=!1,G=Math.abs(a[S].PG1-u);G>i&&(m=!0);var b=Math.abs(a[S].PG2-p);b>i&&(m=!0);var I=Math.abs(a[S].SG1-D);I>i&&(m=!0);var x=Math.abs(a[S].SG2-h);x>i&&(m=!0);var O=Math.abs(a[S].SF1-g);O>i&&(m=!0);var M=Math.abs(a[S].SF2-F);M>i&&(m=!0);var C=Math.abs(a[S].PF1-v);C>i&&(m=!0);var E=Math.abs(a[S].PF2-T);E>i&&(m=!0);var R=Math.abs(a[S].C-A);if(R>i&&(m=!0),!m)return!0}return!1},e.keepThisDraft=function(a,e,r,o,t,n,s){for(var i=0,P=l("orderBy")(s.players,"_FPPG",!0),f=l("position")(P,"PG"),d=l("position")(P,"SG"),y=l("position")(P,"SF"),c=l("position")(P,"PF"),_=l("position")(P,"C"),u=e.indexOf(f[0])+1,p=e.indexOf(f[1])+1,D=r.indexOf(d[0])+1,h=r.indexOf(d[1])+1,g=o.indexOf(y[0])+1,F=o.indexOf(y[1])+1,v=t.indexOf(c[0])+1,T=t.indexOf(c[1])+1,A=n.indexOf(_[0])+1,S=0;S<a.length;S++){var m=!1,G=Math.abs(a[S].PG1-u);G!=i&&(m=!0);var b=Math.abs(a[S].PG2-p);b!=i&&(m=!0);var I=Math.abs(a[S].SG1-D);I!=i&&(m=!0);var x=Math.abs(a[S].SG2-h);x!=i&&(m=!0);var O=Math.abs(a[S].SF1-g);O!=i&&(m=!0);var M=Math.abs(a[S].SF2-F);M!=i&&(m=!0);var C=Math.abs(a[S].PF1-v);C!=i&&(m=!0);var E=Math.abs(a[S].PF2-T);E!=i&&(m=!0);var R=Math.abs(a[S].C-A);if(R!=i&&(m=!0),!m)return!0}return!1},e.getDraftFPPG=function(a){var e=0;return a.forEach(function(a){e+=a._FPPG}),e=parseFloat(e),e.toFixed(2)},e.getDraftActual=function(a){var e=0;return a.forEach(function(a){e+=a._ActualFantasyPoints}),e=parseFloat(e),e.toFixed(2)},e.openCloseDraftDetails=function(a){r.open({templateUrl:"/js/AngularControllers/modalDraft.html",controller:"DKDraftModalController",size:"lg",resolve:{draft:function(){return a}}})},e.openClosePlayerDetails=function(a){r.open({templateUrl:"/js/AngularControllers/modalPlayer.html",controller:"PlayerModalController",size:"lg",resolve:{allPlayers:function(){return e._AllPlayersMASTER},selectedPlayer:function(){return a}}})},e.doesDraftHaveDupPlayers=function(a){var e=[],l=!1;return a.forEach(function(a){e.indexOf(a._Name)>-1?l=!0:e.push(a._Name)}),l},e.isDraftSalaryValid=function(a){var e=5e4;return a.forEach(function(a){e-=a._Salary}),e>=0},e.isDraftTeamValid=function(a){var e=[];if(a.forEach(function(a){e.indexOf(a._Team)===-1&&e.push(a._Team)}),e.length<2)return!1;var l=[];return a.forEach(function(a){l.indexOf(a._Game)===-1&&l.push(a._Game)}),!(l.length<2)},e.getCombinations=function(a,e){for(var l=function(a,e,r,o){if(0==a)return void(r.length>0&&(o[o.length]=r));for(var t=0;t<e.length;t++)l(a-1,e.slice(t+1),r.concat([e[t]]),o)},r=[],o=e;o<a.length;o++)l(o,a,[],r);r.push(a);for(var t=0;t<r.length;t++)r[t].length>e&&r.splice(t);return r},e.clearAllPlayerFilters=function(){e.SelectedTeam="All",e.SelectedWeeks=[]},e.openSaveDialog=function(){e.savedPastSettings=[];var a={_AllPlayers:e._AllPlayers,_PGPlayerPool:e._PGPlayerPool,_SGPlayerPool:e._SGPlayerPool,_SFPlayerPool:e._SFPlayerPool,_PFPlayerPool:e._PFPlayerPool,_CPlayerPool:e._CPlayerPool,_GPlayerPool:e._GPlayerPool,_FPlayerPool:e._FPlayerPool,_UTILPlayerPool:e._UTILPlayerPool,TopRange:t.TopRange,BottomRange:t.BottomRange,TopLimit:t.TopLimit},l=r.open({templateUrl:"/js/AngularControllers/saveDialog.html",controller:"SaveModalController",size:"lg",backdrop:"static",resolve:{postObject:function(){return a},currentRead:function(){return e.currentRead},site:function(){return"DraftKings"}}});l.result.then(function(a){e.currentRead=a.readData,e.loadPlayersFromSave(a.postObject),e.mainTabHeading="Players - "+a.title},function(){})},e.read=function(l){a.post("/NBA/read",{id:l}).then(function(a){e.currentRead=a.data,e.loadPlayersFromSave(JSON.parse(e.currentRead.userSaveJSON)),e.mainTabHeading="Players - "+e.currentRead.title},function(a){void 0!==a.data.error?e.displayNewMessage("danger","Loading Single Saves - Failed, "+a.data.error):e.displayNewMessage("danger","Loading Single Saves - Failed")})},e.loadHistory=function(){a.post("/NBA/loadHistory",{endIndex:e.savedPastSettings.length}).then(function(a){var l=a.data;l.forEach(function(a){e.savedPastSettings.push(a)})},function(a){void 0!==a.data.error?e.displayNewMessage("danger","Loading More Saves - Failed, "+a.data.error):e.displayNewMessage("danger","Loading More Saves - Failed")})},e.setDeleteConfirmation=function(a){e.DeleteConfirmationID=a},e.unsetDeleteConfirmation=function(){e.DeleteConfirmationID=-1},e.showDeleteConfirmation=function(a){return e.DeleteConfirmationID==a},e["delete"]=function(l){a.post("/NBA/delete",{id:l}).then(function(a){for(var r=-1,o=0;o<e.savedPastSettings.length;o++)if(e.savedPastSettings[o].id==l){r=o;break}e.savedPastSettings.splice(r,1),e.displayNewMessage("success","Deleting #"+l+" - Success")},function(a){void 0!==a.data.error?e.displayNewMessage("danger","Deleting - Failed, "+a.data.error):e.displayNewMessage("danger","Deleting - Failed")})},e.updateTitle=function(l,r){a.post("/NBA/updateTitle",{id:l,title:r}).then(function(a){e.displayNewMessage("success","Title Update - Success, Saved: "+r)},function(a){void 0!==a.data.error?e.displayNewMessage("danger","Title Update - Failed,"+a.data.error):void 0!==a.data.title?e.displayNewMessage("danger","Title Update - Failed, "+a.data.title):e.displayNewMessage("danger","Title Update - Failed")})},e.loadPlayerInPool=function(a,l,r){a.forEach(function(a){a._Name==l._Name&&a._Position==l._Position&&a._Team==l._Team&&e.addPlayerToPool(l,r)})},e.loadPlayersFromSave=function(a){e.clearPlayerPools(),e.clearDrafts(),e.clearAllPlayers(),e.clearAllPlayerFilters(),e._AllPlayers=a._AllPlayers,e._AllPlayersMASTER=a._AllPlayers,t.TopRange=parseFloat(a.TopRange),t.BottomRange=parseFloat(a.BottomRange),void 0!=a.TopLimit&&(t.TopLimit=parseInt(a.TopLimit)),e._AllPlayers.forEach(function(l){e._Positions.indexOf(l._Position)===-1&&e._Positions.push(l._Position),0==e._AllTeams.length?e._AllTeams.push(l._Team):e._AllTeams.indexOf(l._Team)==-1&&e._AllTeams.push(l._Team),e.loadPlayerInPool(a._PGPlayerPool,l,"PG"),e.loadPlayerInPool(a._SGPlayerPool,l,"SG"),e.loadPlayerInPool(a._SFPlayerPool,l,"SF"),e.loadPlayerInPool(a._PFPlayerPool,l,"PF"),e.loadPlayerInPool(a._CPlayerPool,l,"C"),e.loadPlayerInPool(a._GPlayerPool,l,"G"),e.loadPlayerInPool(a._FPlayerPool,l,"F"),e.loadPlayerInPool(a._UTILPlayerPool,l,"UTIL")}),e._Positions.sort(),e.displayNewMessage("success","Previous save loaded successfully.")}}])}]);