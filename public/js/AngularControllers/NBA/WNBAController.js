!function(a){function e(t){if(l[t])return l[t].exports;var r=l[t]={i:t,l:!1,exports:{}};return a[t].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var l={};return e.m=a,e.c=l,e.i=function(a){return a},e.d=function(a,e,l){Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:l})},e.n=function(a){var l=a&&a.__esModule?function(){return a["default"]}:function(){return a};return e.d(l,"a",l),l},e.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},e.p="",e(e.s=0)}([function(a,e){angular.module("NBAApp").controller("NBAController",["$http","$scope","$filter","$uibModal","$window",function(a,e,l,t,r){var o=this;e.alerts=[{type:"info",msg:"Please Upload/Load Players...",number:1}],e._Positions=[],e._AllTeams=[],e._AllWeeks=[],e._AllPlayersMASTER=[],e._AllPlayers=[],e._AllReadPlayerIDs=[],e._AllStacks=[],e._G1PlayerPool=[],e._G2PlayerPool=[],e._G3PlayerPool=[],e._F1PlayerPool=[],e._F2PlayerPool=[],e._F3PlayerPool=[],e._F4PlayerPool=[],e._AllDisplayedDraftData=[],e._AllDraftData=[],e.TotalPossibleDrafts=0,e.TotalValidDrafts=0,e.SelectedValidDrafts=!0,e.sortTypeDraft="FPPG",e.sortType="_Salary",e.sortReverse=!0,e.sortReverseDraft=!0,e.SelectedPosition="G1",e.SelectedTeam="All",e.SelectedStackPositions=[],e.SelectedDraft=null,e.totalPossibleDraftsToBeCreated=0,e.totalPossibleCurrentDraftsCount=0,e.tempDrafts=[],e.tempPlayerNamesList=[],e.AVERAGE=parseFloat(-1),e.STDEVIATION=parseFloat(-1),e.TopRange=-1,e.BottomRange=-1,o.TopLimit=150,o.TopRange=-1,o.BottomRange=-1,o.removeDups=!0,o.minTeamStack1=3,o.teamsForStack1=[],o.minTeamStack2=2,o.teamsForStack2=[],o.minTeamStack3=1,o.teamsForStack3=[],e.savedPastSettings=[],e.currentRead=null,e._AllPlayers=l("team")(e._AllPlayers,e.SelectedTeam),e._AllPlayers=l("position")(e._AllPlayers,e.SelectedPosition),e.mainTabHeading="Players",e.DeleteConfirmationID=-1;e.displayNewMessage=function(a,l){r.scrollTo(0,0),e.addAlert(a,l)},e.addAlert=function(a,l){var t=1;e.alerts.length>100&&(e.alerts=[]),e.alerts.forEach(function(e){e.type==a&&e.msg==l&&t++}),l.indexOf("Unauthenticated")!==-1?e.alerts.push({type:a,msg:l,number:t,login:!0}):e.alerts.push({type:a,msg:l,number:t,login:!1})},e.closeAlert=function(a){e.alerts.splice(a,1)},e.loadProjectionsAsActual=function(a){var l=a.target.files[0],t="",r=new FileReader;r.onload=function(a){t=r.result;for(var l=t.split(/\r\n|\n/),o=0;o<l.length;o++){for(var n=l[o].split(","),s="",i="",c="",f=0,d=0,P="",u="",p=0;p<n.length;p++)switch(p){case 0:var y=n[p].replace('"',"").replace('"',"").replace("Jr.","").replace("Sr.","").trim(),_=y.split(" ");i=_[0],c=2==_.length?_[1]:_[2];break;case 1:d=parseInt(n[p].replace('"',"").replace('"',"").replace("$","").trim());break;case 2:P=n[p].replace('"',"").replace('"',"").trim();break;case 3:s=n[p].replace('"',"").replace('"',"").trim();break;case 4:u=n[p].replace('"',"").replace('"',"").trim();break;case 7:f=parseFloat(n[p].replace('"',"").replace('"',"").trim())}e._AllPlayers.forEach(function(a){a._Name.includes(i)&&a._Name.includes(c)&&a._Position==s&&(a._ActualFantasyPoints=f)})}},e.$apply(function(){e.displayNewMessage("success","Player projections loaded as actual Success")}),r.readAsText(l)},e.loadActual=function(a){var l=a.target.files[0],t="",r=new FileReader;r.onload=function(a){t=r.result;for(var l=t.split(/\r\n|\n/),o=(l[0].split(","),1);o<l.length;o++){for(var n=l[o].split(","),s="",i="",c=0,f=0,d=0;d<n.length;d++)switch(d){case 0:var P=n[d].replace('"',"").replace('"',"").replace("Jr.","").replace("Sr.","").trim(),u=P.split(" ");s=u[0],i=2==u.length?u[1]:u[2];break;case 1:f=parseFloat(n[d].replace('"',"").replace('"',"").trim());break;case 2:c=parseFloat(n[d].replace('"',"").replace('"',"").trim())}e._AllPlayers.forEach(function(a){a._Name.includes(s)&&a._Name.includes(i)&&(a._ActualFantasyPoints=c,a._FPPG=f,e.updatePlayerPtsPerDollar(a)),e._Positions.indexOf(a._Postion)===-1&&e._Positions.push(a._Position)})}e._Positions.sort(),e.$apply(function(){e.displayNewMessage("success","Player Actual Results have been successfully loaded")})},r.readAsText(l),angular.forEach(angular.element("input[type='file']"),function(a){angular.element(a).val(null)})},e.loadPlayers=function(l){e.clearPlayerPools(),e.clearDrafts(),e.clearAllPlayers(),e.clearAllPlayerFilters(),e.currentRead=null,e.mainTabHeading="Players";var t=new FormData;t.append("csvFile",l.target.files[0]),a.post("/WNBA/loadFanDuelPlayers",t,{headers:{"Content-Type":void 0,transformRequest:angular.identity}}).then(function(a){a.data.forEach(function(a){a._Salary=parseFloat(a._Salary),a._FPPG=parseFloat(a._FPPG),a._FPPG=a._FPPG.toFixed(2),a._FPPG=parseFloat(a._FPPG);var l=parseFloat((a._FPPG/a._Salary).toFixed(5));a._ProjectedPointsPerDollar=l,"O"==a._playerInjured?a._playerInjured="danger":"GTD"==a._playerInjured&&(a._playerInjured="warning"),0==e._AllTeams.length?e._AllTeams.push(a._Team):e._AllTeams.indexOf(a._Team)==-1&&e._AllTeams.push(a._Team),e._AllPlayers.push(a),e._AllPlayersMASTER.push(a)}),e._AllPlayers.length>0&&e.displayNewMessage("success","Players have been successfully loaded")},function(a){e.displayNewMessage("danger","Error: Players could not be loaded.")}),angular.forEach(angular.element("input[type='file']"),function(a){angular.element(a).val(null)})},e.selectTopActualPlayers=function(){if(e.clearPlayerPools(),0!==e._AllPlayers.length)for(var a=l("orderBy")(e._AllPlayers,"_ActualFantasyPoints",!0),t=l("position")(a,"G"),r=l("position")(a,"F"),o=0;o<12;o++)o<3&&(e.addPlayerToPool(t[o],"G1"),e.addPlayerToPool(r[o],"F1")),o>0&&o<5&&(e.addPlayerToPool(t[o],"G2"),e.addPlayerToPool(r[o],"F2")),o>4&&(e.addPlayerToPool(t[o],"G3"),e.addPlayerToPool(r[o],"F3"),e.addPlayerToPool(r[o],"F4"))},e.teamRemovalFormularHelpers=function(a,e){var l=[],t=[];return 0!=e.length&&(l.push(e[0]._Team),t.push(e[0])),a.forEach(function(a){if(l.indexOf(a._Team)!=-1){var e=l.indexOf(a._Team),r=t[e];r._Salary<a._Salary?t[e]=a:r._Salary===a._Salary&&r._FPPG<a._FPPG&&(t[e]=a)}else l.indexOf(a._Team)==-1&&(l.push(a._Team),t.push(a))}),t},e.setAndUnsetPosition=function(a){e.SelectedPosition===a||(e.SelectedPosition=a)},e.updatePlayerPtsPerDollar=function(a){var l=e._AllPlayers.indexOf(a);l!==-1&&(e._AllPlayers[l]._ProjectedPointsPerDollar=parseFloat(a._FPPG/a._Salary).toFixed(5),a._ProjectedPointsPerDollar=parseFloat(a._FPPG/a._Salary).toFixed(5))},e.addSalaryImpliedPts=function(){e._AllPlayers.forEach(function(a){a._FPPG=.004*a._Salary,a._FPPG=a._FPPG.toFixed(1),a._FPPG=parseFloat(a._FPPG),e.updatePlayerPtsPerDollar(a)})},e.selectTopFPPGPlayers=function(){if(e.clearPlayerPools(),0!==e._AllPlayers.length)for(var a=l("orderBy")(e._AllPlayers,"_FPPG",!0),t=l("position")(a,"G"),r=l("position")(a,"F"),o=0;o<12;o++)o<3&&(e.addPlayerToPool(t[o],"G1"),e.addPlayerToPool(r[o],"F1")),o>0&&o<5&&(e.addPlayerToPool(t[o],"G2"),e.addPlayerToPool(r[o],"F2")),o>4&&(e.addPlayerToPool(t[o],"G3"),e.addPlayerToPool(r[o],"F3"),e.addPlayerToPool(r[o],"F4"))},e.parseFloat=function(a){return parseFloat(a)},e.clearAllPlayers=function(){e._AllPlayers=[],e._AllPlayersMASTER=[],e._AllTeams=[],e._Positions=[],o.minTeamStack1=3,o.teamsForStack1=[],o.minTeamStack2=2,o.teamsForStack2=[],o.minTeamStack3=1,o.teamsForStack3=[]},e.changeLineups=function(e){for(var l=new FormData,t=0;t<e.length;t++)l.append(e[t].name,e[t]);a.post("/api/WNBA/changeLineups",l,{headers:{"Content-Type":void 0,transformRequest:angular.identity}}).then(function(a){},function(a){})},e.getPointsPerDollar=function(a){var e=0;return e=a._FPPG/a._Salary,e=e.toFixed(5),e=parseFloat(e)},e.resetMessage=function(){e._Message.hasData=!1,e._Message.messageType="info",e._Message.message=""},e.addRemoveTeam=function(a){e.SelectedTeam===a?e.SelectedTeam="All":e.SelectedTeam=a},e.addRemoveWeek=function(a){var l=e.SelectedWeeks.indexOf(a);l>-1?e.SelectedWeeks.splice(l,1):e.SelectedWeeks.push(a)},e.setDraftSortTypeAndReverse=function(a){if(e.sortTypeDraft=a,e.sortReverseDraft=!e.sortReverseDraft,e._AllDraftData=l("orderBy")(e._AllDraftData,e.sortTypeDraft,e.sortReverseDraft),e._AllDisplayedDraftData=[],e._AllDraftData.length>150)for(var t=0;t<150;t++)e._AllDisplayedDraftData.push(e._AllDraftData[t]);else for(var t=0;t<e._AllDraftData.length;t++)e._AllDisplayedDraftData.push(e._AllDraftData[t])},e.CSVReplace=function(a){var t=a.target.files[0],r="",o=new FileReader;o.onload=function(a){r=o.result;for(var t=r.split(/\r\n|\n/),n=(t[0].split(","),[]),s=1;s<t.length;s++){for(var i=t[s].split(","),c="",f="",d="",P=0;P<i.length;P++)switch(P){case 0:c=i[P].replace('"',"").replace('"',"").trim();break;case 1:f=i[P].replace('"',"").replace('"',"").trim();break;case 2:d=i[P].replace('"',"").replace('"',"").trim()}var u={entry_id:c,contest_id:f,contest_name:d};void 0!==c&&""!==c&&n.push(u)}if(e._AllDraftData.length==n.length){var p=0,y=e._AllDraftData;y=l("checkValidOnly")(y,!0),y=l("orderBy")(y,e.sortTypeDraft,e.sortReverseDraft);var _="data:text/csv;charset=utf-8,";_+="entry_id,contest_id,contest_name,G,G,G,F,F,F,F\n";for(var m=0;m<n.length;m++){var D=n[m].contest_id.split("-");if(y[m].players[0].playerID.indexOf(D[0])!==-1){_=_+n[m].entry_id+","+n[m].contest_id+","+n[m].contest_name+",";for(var F="",P=0;P<y[m].players.length;P++)0==P?F+=y[m].players[P].playerID:F=F+","+y[m].players[P].playerID;_=_+F+"\n",p++}else e.$apply(function(){e.displayNewMessage("warning","WARNING: player ID does not contain contest ID, Are you sure you have the correct CSV Replace file?")})}if(p>0){var g=angular.element("<a/>");g.css({display:"none"}),angular.element(document.body).append(g);var h="";e._AllTeams.forEach(function(a){h=0==h.length?a:h+"_"+a}),g.attr({href:encodeURI(_),target:"_blank",download:"CSVReplace_"+h+".csv"})[0].click(),g.remove(),e.$apply(function(){e.displayNewMessage("success","Successfully replaced lineups in CSV")})}}else e.$apply(function(){e.displayNewMessage("danger","ERROR: # drafts: "+e._AllDraftData.length+" != "+n.length+". Both CSV File and Total Drafts must be equal.")})},o.readAsText(t),angular.forEach(angular.element("input[type='file']"),function(a){angular.element(a).val(null)})},e.DownloadDraftCSV=function(){if(0==e._AllDraftData.length)return void e.displayNewMessage("danger","Error: Cannot downloaded drafts when none have been generated");var t="data:text/csv;charset=utf-8,",r=e._AllDraftData;r=l("checkValidOnly")(r,!0),r=l("orderBy")(r,e.sortTypeDraft,e.sortReverseDraft),t+="G,G,G,F,F,F,F\n",r.forEach(function(a){for(var e="",l=0;l<a.players.length;l++)0==l?e+=a.players[l].playerID:e=e+","+a.players[l].playerID;t=t+e+"\n"}),a.post("/WNBA/downloadDrafts",{downloadDrafts:r.length}).then(function(a){},function(a){return void 0!==a.data.error?void e.displayNewMessage("danger","Download Drafts - Failed, "+a.data.error):void e.displayNewMessage("danger","Download Drafts - Failed")});var o=angular.element("<a/>");o.css({display:"none"}),angular.element(document.body).append(o);var n="";e._AllTeams.forEach(function(a){n=0==n.length?a:n+"_"+a}),o.attr({href:encodeURI(t),target:"_blank",download:n+".csv"})[0].click(),o.remove()},e.removePlayerFromPool=function(a,l){if(e.playerInPool(a,l))switch(l){case"G1":e._G1PlayerPool.splice(e._G1PlayerPool.indexOf(a),1);break;case"G2":e._G2PlayerPool.splice(e._G2PlayerPool.indexOf(a),1);break;case"G3":e._G3PlayerPool.splice(e._G3PlayerPool.indexOf(a),1);break;case"F1":e._F1PlayerPool.splice(e._F1PlayerPool.indexOf(a),1);break;case"F2":e._F2PlayerPool.splice(e._F2PlayerPool.indexOf(a),1);break;case"F3":e._F3PlayerPool.splice(e._F3PlayerPool.indexOf(a),1);break;case"F4":e._F4PlayerPool.splice(e._F4PlayerPool.indexOf(a),1)}},e.addPlayerToPool=function(a,l){if(""===e.SelectedPosition&&e.displayNewMessage("danger","Please select a position"),!e.playerInPool(a,l))switch(l){case"G1":e._G1PlayerPool.push(a);break;case"G2":e._G2PlayerPool.push(a);break;case"G3":e._G3PlayerPool.push(a);break;case"F1":e._F1PlayerPool.push(a);break;case"F2":e._F2PlayerPool.push(a);break;case"F3":e._F3PlayerPool.push(a);break;case"F4":e._F4PlayerPool.push(a)}},e.playerInPool=function(a,l){switch(l){case"G1":if(e._G1PlayerPool.indexOf(a)>-1)return!0;break;case"G2":if(e._G2PlayerPool.indexOf(a)>-1)return!0;break;case"G3":if(e._G3PlayerPool.indexOf(a)>-1)return!0;break;case"F1":if(e._F1PlayerPool.indexOf(a)>-1)return!0;break;case"F2":if(e._F2PlayerPool.indexOf(a)>-1)return!0;break;case"F3":if(e._F3PlayerPool.indexOf(a)>-1)return!0;break;case"F4":if(e._F4PlayerPool.indexOf(a)>-1)return!0}return!1},e.clearPlayerPools=function(){e._G1PlayerPool=[],e._G2PlayerPool=[],e._G3PlayerPool=[],e._F1PlayerPool=[],e._F2PlayerPool=[],e._F3PlayerPool=[],e._F4PlayerPool=[]},e.averagePlayerPoolSalary=function(a){if(0==a.length)return 0;var e=0;return a.forEach(function(a){e+=a._Salary}),Math.round(e/a.length,0)},e.removeDraft=function(a){e._AllDisplayedDraftData.splice(e._AllDisplayedDraftData.indexOf(a),1);var l=e._AllDraftData.indexOf(a);e._AllDraftData.splice(l,1),e.TotalPossibleDrafts=e._AllDraftData.length,e.TotalValidDrafts=e.TotalPossibleDrafts},e.removeAllButTopN=function(){if(e._AllDraftData=l("orderBy")(e._AllDraftData,e.sortTypeDraft,e.sortReverseDraft),e._AllDraftData.length>o.TopLimit){for(var a=[],t=0;t<o.TopLimit;t++)a.push(e._AllDraftData[t]);e._AllDraftData=a,e.TotalPossibleDrafts=e._AllDraftData.length,e.TotalValidDrafts=e.TotalPossibleDrafts,e._AllDisplayedDraftData=[];for(var r=0;r<o.TopLimit;r++)e._AllDisplayedDraftData.push(e._AllDraftData[r])}},e.clearDrafts=function(){e._AllDraftData=[],e.TotalPossibleDrafts=0,e.TotalValidDrafts=0},e.setPlayerRanking=function(){var a=l("orderBy")(e._AllPlayers,"_FPPG",!0),t=l("removeOut")(a),r=l("position")(t,"G"),o=l("position")(t,"F"),n=l("removeOut")(a),s=l("position")(n,"G"),i=l("position")(n,"F");e._AllPlayers.forEach(function(a){var e=99;if(a._playerInjured)switch(a._Position){case"G":e=s.indexOf(a)+1;break;case"F":e=i.indexOf(a)+1}else switch(a._Position){case"G":e=r.indexOf(a)+1;break;case"F":e=o.indexOf(a)+1}a._Rank=e})},e.averageRank=function(a){var e=0;return a.forEach(function(a){e+=a._Rank}),e=parseFloat(e/a.length),e.toFixed(2)},e.buildDrafts=function(){if(0==e._G1PlayerPool.length||0==e._G2PlayerPool.length||0==e._G3PlayerPool.length||0==e._F1PlayerPool.length||0==e._F2PlayerPool.length||0==e._F3PlayerPool.length||0==e._F4PlayerPool.length)return void e.displayNewMessage("danger","Error: One or more player pools contain zero players");if(e.setPlayerRanking(),e.totalPossibleDraftsToBeCreated=e._G1PlayerPool.length*e._G2PlayerPool.length*e._G3PlayerPool.length*e._F1PlayerPool.length*e._F2PlayerPool.length*e._F3PlayerPool.length*e._F4PlayerPool.length,!(e.totalPossibleDraftsToBeCreated>15e3)||confirm("Creating "+e.totalPossibleDraftsToBeCreated+" possible drafts can take longer than expected. It can crash your session if loaded with to much memory, save your data. Are you sure you want to create?")){e.clearDrafts();var t=[];if(e._G1PlayerPool.forEach(function(a){var l={};l.G1=a,e._G2PlayerPool.forEach(function(a){l.G2=a,e._G3PlayerPool.forEach(function(a){l.G3=a,e._F1PlayerPool.forEach(function(a){l.F1=a,e._F2PlayerPool.forEach(function(a){l.F2=a,e._F3PlayerPool.forEach(function(a){l.F3=a,e._F4PlayerPool.forEach(function(a){l.F4=a,e.totalPossibleCurrentDraftsCount++;var r=[];r.push(l.G1),r.push(l.G2),r.push(l.G3),r.push(l.F1),r.push(l.F2),r.push(l.F3),r.push(l.F4);var n={};if(n.G=[],n.F=[],r.forEach(function(a){n[a._Position].push(a)}),e.isDraftTeamValid(r)&&e.isDraftSalaryValid(r)&&!e.doesDraftHaveDupPlayers(r)&&e.validTeamStacks(r)){var s={FPPG:parseFloat(e.getDraftFPPG(r)),Actual:parseFloat(e.getDraftActual(r)),validTeam:e.isDraftTeamValid(r),validSalary:e.isDraftSalaryValid(r),salaryLeft:parseInt(e.getDraftSalaryLeft(r)),players:r,playerNames:n,playersPositionData:angular.copy(l),displayDetails:!1,pointsPerDollar:parseFloat(e.averageValue(r)),averageRank:parseFloat(e.averageRank(r))};if(o.removeDups){var i=!1;if(t.length>0){for(var c=t.length-1;c>=0;c--){var f=0;if(n.G.indexOf(t[c].G[0])!==-1&&f++,n.G.indexOf(t[c].G[1])!==-1&&f++,n.G.indexOf(t[c].G[2])!==-1&&f++,n.F.indexOf(t[c].F[0])!==-1&&f++,n.F.indexOf(t[c].F[1])!==-1&&f++,n.F.indexOf(t[c].F[2])!==-1&&f++,n.F.indexOf(t[c].F[3])!==-1&&f++,7===f){i=!0;break}}i||(e._AllDraftData.push(s),t.push(n))}else e._AllDraftData.push(s),t.push(n)}else e._AllDraftData.push(s),t.push(n)}})})})})})})}),0==e._AllDraftData.length&&e.displayNewMessage("danger","No Lineups Built, Try adding more players"),a.post("/WNBA/buildDraft",{builtDrafts:e._AllDraftData.length}).then(function(a){},function(a){return void 0!==a.data.error?(e._AllDisplayedDraftData=[],e._AllDraftData=[],void e.displayNewMessage("danger","Build Failed, "+a.data.error)):void e.displayNewMessage("danger","Loading Single Saves - Failed "+a.data)}),e.TotalPossibleDrafts=e._AllDraftData.length,e.TotalValidDrafts=e.TotalPossibleDrafts,e._AllDraftData=l("orderBy")(e._AllDraftData,e.sortTypeDraft,!0),e._AllDisplayedDraftData=[],e._AllDraftData.length>150)for(var r=0;r<150;r++)e._AllDisplayedDraftData.push(e._AllDraftData[r]);else for(var r=0;r<e._AllDraftData.length;r++)e._AllDisplayedDraftData.push(e._AllDraftData[r])}},e.doesDraftHaveDupPlayers=function(a){var e=[],l=!1;return a.forEach(function(a){e.indexOf(a._Name)>-1?l=!0:e.push(a._Name)}),l},e.getDraftSalaryLeft=function(a){var e=4e4;return a.forEach(function(a){e-=a._Salary}),e=parseInt(e)},e.getPlayerPercentInPosition=function(a,l){if(e.TotalValidDrafts>0){var t=0;return e._AllDraftData.forEach(function(e){e.playersPositionData[l]._Name===a._Name&&t++}),(t/e.TotalValidDrafts*100).toFixed(0)}return 0},e.removeCalcDrafts=function(){var a=l("removeCalcDraft")(e._AllDraftData,parseFloat(o.TopRange),parseFloat(o.BottomRange),e.sortTypeDraft);e._AllDraftData=a,e.TotalPossibleDrafts=e._AllDraftData.length;var t=l("checkValidOnly")(e._AllDraftData,!0);if(e.TotalValidDrafts=t.length,e._AllDisplayedDraftData=[],e._AllDraftData.length>150)for(var r=0;r<150;r++)e._AllDisplayedDraftData.push(e._AllDraftData[r]);else for(var r=0;r<e._AllDraftData.length;r++)e._AllDisplayedDraftData.push(e._AllDraftData[r])},e.getDraftSalaryRemaining=function(a){var e=4e4;return a.players.forEach(function(a){e-=a._Salary}),e},e.getDraftFPPG=function(a){var e=0;return a.forEach(function(a){e+=a._FPPG}),e=parseFloat(e),e.toFixed(2)},e.getDraftActual=function(a){var e=0;return a.forEach(function(a){e+=a._ActualFantasyPoints}),e=parseFloat(e),e.toFixed(2)},e.openCloseDraftDetails=function(a){t.open({templateUrl:"/js/AngularControllers/modalDraft.html",controller:"DraftModalControllerWNBA",size:"lg",resolve:{draft:function(){return a}}})},e.openClosePlayerDetails=function(a){t.open({templateUrl:"/js/AngularControllers/modalPlayer.html",controller:"PlayerModalController",size:"lg",resolve:{allPlayers:function(){return e._AllPlayers},selectedPlayer:function(){return a}}})},e.isDraftSalaryValid=function(a){var e=4e4;return a.forEach(function(a){e-=a._Salary}),e>=0},e.averageValue=function(a){var e=0;return a.forEach(function(a){e=parseFloat(e)+parseFloat(a._ProjectedPointsPerDollar)}),e=parseFloat(e),(e/a.length).toFixed(5)},e.validTeamStacks=function(a){if(0==o.teamsForStack1.length||0==o.teamsForStack2.length)return!0;var e={};a.forEach(function(a){e.hasOwnProperty(a._Team)?e[a._Team]++:e[a._Team]=1});var l=!1,t="";for(var r in e)if(e[r]>=o.minTeamStack1&&o.teamsForStack1.indexOf(r)!==-1){l=!0,t=r;break}var n=!1,s="";for(var r in e)if(e[r]>=o.minTeamStack2&&r!=t&&o.teamsForStack2.indexOf(r)!==-1){n=!0,s=r;break}var i=!1,c="";for(var r in e)if(e[r]>=o.minTeamStack3&&r!=t&&r!=s&&o.teamsForStack3.indexOf(r)!==-1){i=!0,c=r;break}return!!(n&&l&&i)},e.isDraftTeamValid=function(a){var e={};a.forEach(function(a){e.hasOwnProperty(a._Team)?e[a._Team]=e[a._Team]+1:e[a._Team]=1});var l=0;for(team in e){var t=e[team];if(t>4)return!1;l++}return!(l<3)},e.clearAllPlayerFilters=function(){e.SelectedTeam="All",e.SelectedWeeks=[]},e.openAdvanced=function(){var a=t.open({templateUrl:"/js/AngularControllers/modelAdvancedWNBA.html",controller:"AdvancedControllerNBA",size:"lg",resolve:{minTeamStack1:function(){return o.minTeamStack1},minTeamStack2:function(){return o.minTeamStack2},minTeamStack3:function(){return o.minTeamStack3},allTeams:function(){return e._AllTeams},teamsForStack1:function(){return o.teamsForStack1},teamsForStack2:function(){return o.teamsForStack2},teamsForStack3:function(){return o.teamsForStack3}}});a.result.then(function(a){o.minTeamStack1=a.minTeamStack1,o.minTeamStack2=a.minTeamStack2,o.minTeamStack3=a.minTeamStack3,o.teamsForStack1=a.teamsForStack1,o.teamsForStack2=a.teamsForStack2,o.teamsForStack3=a.teamsForStack3},function(){})},e.openSaveDialog=function(){e.savedPastSettings=[];var a={_AllPlayers:e._AllPlayers,_G1PlayerPool:e._G1PlayerPool,_G2PlayerPool:e._G2PlayerPool,_G3PlayerPool:e._G3PlayerPool,_F1PlayerPool:e._F1PlayerPool,_F2PlayerPool:e._F2PlayerPool,_F3PlayerPool:e._F3PlayerPool,_F4PlayerPool:e._F4PlayerPool,TopRange:o.TopRange,BottomRange:o.BottomRange,TopLimit:o.TopLimit,minTeamStack1:o.minTeamStack1,minTeamStack2:o.minTeamStack2,minTeamStack3:o.minTeamStack3,teamsForStack1:o.teamsForStack1,teamsForStack2:o.teamsForStack2,teamsForStack3:o.teamsForStack3},l=t.open({templateUrl:"/js/AngularControllers/saveDialog.html",controller:"SaveModalControllerWNBA",size:"lg",backdrop:"static",resolve:{postObject:function(){return a},currentRead:function(){return e.currentRead},site:function(){return"FanDuel"}}});l.result.then(function(a){e.currentRead=a.readData,e.loadPlayersFromSave(a.postObject),e.mainTabHeading="Players - "+a.title},function(){})},e.read=function(l){a.post("/WNBA/read",{id:l}).then(function(a){e.currentRead=a.data,e.loadPlayersFromSave(JSON.parse(e.currentRead.userSaveJSON)),e.mainTabHeading="Players - "+e.currentRead.title},function(a){void 0!==a.data.error?e.displayNewMessage("danger","Loading Single Saves - Failed, "+a.data.error):e.displayNewMessage("danger","Loading Single Saves - Failed")})},e.loadHistory=function(){a.post("/WNBA/loadHistory",{endIndex:e.savedPastSettings.length}).then(function(a){var l=a.data;l.forEach(function(a){e.savedPastSettings.push(a)})},function(a){void 0!==a.data.error?e.displayNewMessage("danger","Loading More Saves - Failed, "+a.data.error):e.displayNewMessage("danger","Loading More Saves - Failed")})},e.setDeleteConfirmation=function(a){e.DeleteConfirmationID=a},e.unsetDeleteConfirmation=function(){e.DeleteConfirmationID=-1},e.showDeleteConfirmation=function(a){return e.DeleteConfirmationID==a},e["delete"]=function(l){a.post("/WNBA/delete",{id:l}).then(function(a){for(var t=-1,r=0;r<e.savedPastSettings.length;r++)if(e.savedPastSettings[r].id==l){t=r;break}e.savedPastSettings.splice(t,1),e.displayNewMessage("success","Deleting #"+l+" - Success")},function(a){void 0!==a.data.error?e.displayNewMessage("danger","Deleting - Failed, "+a.data.error):e.displayNewMessage("danger","Deleting - Failed")})},e.updateTitle=function(l,t){a.post("/WNBA/updateTitle",{id:l,title:t}).then(function(a){e.displayNewMessage("success","Title Update - Success, Saved: "+t)},function(a){void 0!==a.data.error?e.displayNewMessage("danger","Title Update - Failed,"+a.data.error):void 0!==a.data.title?e.displayNewMessage("danger","Title Update - Failed, "+a.data.title):e.displayNewMessage("danger","Title Update - Failed")})},e.loadPlayerInPool=function(a,l,t){a.forEach(function(a){a._Name==l._Name&&a._Position==l._Position&&a._Team==l._Team&&e.addPlayerToPool(l,t)})},e.loadPlayersFromSave=function(a){e.clearPlayerPools(),e.clearDrafts(),e.clearAllPlayers(),e.clearAllPlayerFilters(),e._AllPlayers=a._AllPlayers,e._AllPlayersMASTER=a._AllPlayers,o.TopRange=parseFloat(a.TopRange),o.BottomRange=parseFloat(a.BottomRange),o.TopLimit=parseInt(a.TopLimit),void 0===a.minTeamStack1?(o.minTeamStack1=3,o.teamsForStack1=[],o.minTeamStack2=2,o.teamsForStack2=[],o.minTeamStack3=1,o.teamsForStack3=[]):(o.minTeamStack1=parseInt(a.minTeamStack1),o.teamsForStack1=a.teamsForStack1,o.minTeamStack2=parseInt(a.minTeamStack2),o.teamsForStack2=a.teamsForStack2,o.minTeamStack3=parseInt(a.minTeamStack3),o.teamsForStack3=a.teamsForStack3),e._AllPlayers.forEach(function(l){0==e._AllTeams.length?e._AllTeams.push(l._Team):e._AllTeams.indexOf(l._Team)==-1&&e._AllTeams.push(l._Team),e.loadPlayerInPool(a._G1PlayerPool,l,"G1"),e.loadPlayerInPool(a._G2PlayerPool,l,"G2"),e.loadPlayerInPool(a._G3PlayerPool,l,"G3"),e.loadPlayerInPool(a._F1PlayerPool,l,"F1"),e.loadPlayerInPool(a._F2PlayerPool,l,"F2"),e.loadPlayerInPool(a._F3PlayerPool,l,"F3"),e.loadPlayerInPool(a._F4PlayerPool,l,"F4")}),e.displayNewMessage("success","Previous save loaded successfully.")}}])}]);