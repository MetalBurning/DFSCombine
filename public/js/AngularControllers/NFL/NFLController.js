!function(e){function a(r){if(l[r])return l[r].exports;var t=l[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var l={};return a.m=e,a.c=l,a.i=function(e){return e},a.d=function(e,a,l){Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:l})},a.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(l,"a",l),l},a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},a.p="",a(a.s=0)}([function(e,a){angular.module("NFLApp").controller("NFLController",["$http","$scope","$filter","$uibModal","$window",function(e,a,l,r,t){var o=this;a.mainTabHeading="Players",a.alerts=[{type:"info",msg:"Please Upload/Load Players...",number:1}],a._Positions=[],a._AllTeams=[],a._AllWeeks=[],a._AllPlayersMASTER=[],a._AllPlayers=[],a._AllReadPlayerIDs=[],a._AllStacks=[],a._QBPlayerPool=[],a._RB1PlayerPool=[],a._RB2PlayerPool=[],a._WR1PlayerPool=[],a._WR2PlayerPool=[],a._WR3PlayerPool=[],a._TEPlayerPool=[],a._KPlayerPool=[],a._DSTPlayerPool=[],a.sortTypeDraft="FPPG",a._AllDisplayedDraftData=[],a._AllDraftData=[],a.TotalPossibleDrafts=0,a.TotalValidDrafts=0,a.SelectedValidDrafts=!1,a.sortType="_Salary",a.sortReverse=!0,a.SelectedPosition="QB",a.SelectedTeams=[],a.SelectedWeeks=[],a.SelectedStackPositions=[],a.SelectedDraft=null,a.savedPastSettings=[],o.TopLimit=150,o.TopRange=-1,o.BottomRange=-1,o.removeDups=!0,a.DeleteConfirmationID=-1,a.currentRead=null,a._AllPlayers=l("team")(a._AllPlayers,a.SelectedTeams),a._AllPlayers=l("position")(a._AllPlayers,a.SelectedPosition);a.displayNewMessage=function(e,l){t.scrollTo(0,0),a.addAlert(e,l)},a.addAlert=function(e,l){var r=1;a.alerts.length>100&&(a.alerts=[]),a.alerts.forEach(function(a){a.type==e&&a.msg==l&&r++}),l.indexOf("Unauthenticated")!==-1?a.alerts.push({type:e,msg:l,number:r,login:!0}):a.alerts.push({type:e,msg:l,number:r,login:!1})},a.closeAlert=function(e){a.alerts.splice(e,1)},a.clearAllPlayers=function(){a._AllPlayers=[],a._AllPlayersMASTER=[]},a.loadPlayers=function(l){a.clearPlayerPools(),a.clearDrafts(),a.clearAllPlayers(),a.currentRead=null,a.mainTabHeading="Players";var r=new FormData;r.append("csvFile",l.target.files[0]),e.post("/NFL/loadFanDuelPlayers",r,{headers:{"Content-Type":void 0,transformRequest:angular.identity}}).then(function(e){e.data.forEach(function(e){e._Salary=parseFloat(e._Salary),e._FPPG=parseFloat(e._FPPG),e._FPPG=e._FPPG.toFixed(2),e._FPPG=parseFloat(e._FPPG);var l=parseFloat((e._FPPG/e._Salary).toFixed(5));e._ProjectedPointsPerDollar=l,"IR"==e._playerInjured||"O"==e._playerInjured||"NA"==e._playerInjured?e._playerInjured="danger":"Q"!=e._playerInjured&&"D"!=e._playerInjured||(e._playerInjured="warning"),a._Positions.indexOf(e._Position)===-1&&a._Positions.push(e._Position),0==a._AllTeams.length?a._AllTeams.push(e._Team):a._AllTeams.indexOf(e._Team)==-1&&a._AllTeams.push(e._Team),a._AllPlayers.push(e),a._AllPlayersMASTER.push(e)}),a._AllPlayers.length>0&&a.displayNewMessage("success","Players have been successfully loaded")},function(e){a.displayNewMessage("danger","Error: Players could not be loaded.")}),angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)})},a.loadActual=function(e){var l="",r=new FileReader;r.onload=function(e){l=r.result;for(var t=l.split(/\r\n|\n/),o=(t[0].split(","),1);o<t.length;o++){for(var n=t[o].split(";"),s="",i="",P="",f=0,c=0,d=0;d<n.length;d++)switch(d){case 2:s=n[d].replace('"',"").replace('"',"").trim();break;case 3:var y=n[d].replace('"',"").replace('"',"").replace("Jr.","").replace("Sr.","").trim(),u=y.split(" ");i=u[0],P=2==u.length?u[1]:u[2];break;case 5:f=parseFloat(n[d].replace('"',"").replace('"',"").trim());break;case 6:c=parseInt(n[d].replace('"',"").replace('"',"").replace("$","").trim())}a._AllPlayers.forEach(function(e){e._Name.includes(i)&&e._Name.includes(P)&&e._Position==s&&(e._ActualFantasyPoints=f)})}a.displayNewMessage("info","Player Actual Results have been successfully loaded")},r.readAsText(e[0]),angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)})},a.parseFloat=function(e){return parseFloat(e)},a.resetMessage=function(){a._Message.hasData=!1,a._Message.messageType="info",a._Message.message=""},a.addRemoveTeam=function(e){a.SelectedTeam===e?a.SelectedTeam="All":a.SelectedTeam=e},a.addRemoveWeek=function(e){var l=a.SelectedWeeks.indexOf(e);l>-1?a.SelectedWeeks.splice(l,1):a.SelectedWeeks.push(e)},a.DownloadDraftCSV=function(){if(0==a._AllDraftData.length)return void a.displayNewMessage("danger","Error: Cannot downloaded drafts when none have been generated");var e="data:text/csv;charset=utf-8,",r=a._AllDraftData;r=l("checkValidOnly")(r,!0),r=l("randomize")(r),e+="QB,RB,RB,WR,WR,WR,TE,K,D\n",r.forEach(function(a){for(var l="",r=0;r<a.players.length;r++)0==r?l+=a.players[r].playerID:l=l+","+a.players[r].playerID;e=e+l+"\n"});var t=angular.element("<a/>");t.css({display:"none"}),angular.element(document.body).append(t);var o="";a._AllTeams.forEach(function(e){o=o+"_"+e}),t.attr({href:encodeURI(e),target:"_blank",download:o+".csv"})[0].click(),t.remove()},a.removePlayerFromPool=function(e,l){if(a.playerInPool(e,l))switch(l){case"QB":a._QBPlayerPool.splice(a._QBPlayerPool.indexOf(e),1);break;case"RB1":a._RB1PlayerPool.splice(a._RB1PlayerPool.indexOf(e),1);break;case"RB2":a._RB2PlayerPool.splice(a._RB2PlayerPool.indexOf(e),1);break;case"WR1":a._WR1PlayerPool.splice(a._WR1PlayerPool.indexOf(e),1);break;case"WR2":a._WR2PlayerPool.splice(a._WR2PlayerPool.indexOf(e),1);break;case"WR3":a._WR3PlayerPool.splice(a._WR3PlayerPool.indexOf(e),1);break;case"TE":a._TEPlayerPool.splice(a._TEPlayerPool.indexOf(e),1);break;case"K":a._KPlayerPool.splice(a._KPlayerPool.indexOf(e),1);break;case"DST":a._DSTPlayerPool.splice(a._DSTPlayerPool.indexOf(e),1)}},a.addPlayerToPool=function(e,l){if(!a.playerInPool(e,l))switch(l){case"QB":a._QBPlayerPool.push(e);break;case"RB1":a._RB1PlayerPool.push(e);break;case"RB2":a._RB2PlayerPool.push(e);break;case"WR1":a._WR1PlayerPool.push(e);break;case"WR2":a._WR2PlayerPool.push(e);break;case"WR3":a._WR3PlayerPool.push(e);break;case"TE":a._TEPlayerPool.push(e);break;case"K":a._KPlayerPool.push(e);break;case"DST":a._DSTPlayerPool.push(e)}},a.playerInPool=function(e,l){switch(l){case"QB":if(a._QBPlayerPool.indexOf(e)>-1)return!0;break;case"RB1":if(a._RB1PlayerPool.indexOf(e)>-1)return!0;break;case"RB2":if(a._RB2PlayerPool.indexOf(e)>-1)return!0;break;case"WR1":if(a._WR1PlayerPool.indexOf(e)>-1)return!0;break;case"WR2":if(a._WR2PlayerPool.indexOf(e)>-1)return!0;break;case"WR3":if(a._WR3PlayerPool.indexOf(e)>-1)return!0;break;case"TE":if(a._TEPlayerPool.indexOf(e)>-1)return!0;break;case"K":if(a._KPlayerPool.indexOf(e)>-1)return!0;break;case"DST":if(a._DSTPlayerPool.indexOf(e)>-1)return!0}return!1},a.clearPlayerPools=function(){a._QBPlayerPool=[],a._RB1PlayerPool=[],a._RB2PlayerPool=[],a._WR1PlayerPool=[],a._WR2PlayerPool=[],a._WR3PlayerPool=[],a._TEPlayerPool=[],a._KPlayerPool=[],a._DSTPlayerPool=[]},a.averagePlayerPoolSalary=function(e){if(0==e.length)return 0;var a=0;return e.forEach(function(e){a+=e._Salary}),Math.round(a/e.length,0)},a.removeAllButTopN=function(){if(a._AllDraftData=l("orderBy")(a._AllDraftData,a.sortTypeDraft,a.sortReverseDraft),a._AllDraftData.length>o.TopLimit){for(var e=[],r=0;r<o.TopLimit;r++)e.push(a._AllDraftData[r]);a._AllDraftData=e,a.TotalPossibleDrafts=a._AllDraftData.length,a.TotalValidDrafts=a.TotalPossibleDrafts,a._AllDisplayedDraftData=[];for(var t=0;t<o.TopLimit;t++)a._AllDisplayedDraftData.push(a._AllDraftData[t])}},a.clearDrafts=function(){a._AllDraftData=[],a.TotalPossibleDrafts=0,a.TotalValidDrafts=0},a.setPlayerRanking=function(){var e=l("orderBy")(a._AllPlayers,"_FPPG",!0),r=l("removeInjured")(e),t=l("position")(r,"QB"),o=l("position")(r,"RB"),n=l("position")(r,"WR"),s=l("position")(r,"TE"),i=l("position")(r,"K"),P=l("position")(r,"DST"),f=l("removeOut")(e),c=l("position")(f,"QB"),d=l("position")(f,"RB"),y=l("position")(f,"WR"),u=l("position")(f,"TE"),_=l("position")(f,"K"),p=l("position")(f,"DST");a._AllPlayers.forEach(function(e){var a=99;if(e._playerInjured)switch(e._Position){case"QB":a=c.indexOf(e)+1;break;case"RB":a=d.indexOf(e)+1;break;case"WR":a=y.indexOf(e)+1;break;case"TE":a=u.indexOf(e)+1;break;case"K":a=_.indexOf(e)+1;break;case"DST":a=p.indexOf(e)+1}else switch(e._Position){case"QB":a=t.indexOf(e)+1;break;case"RB":a=o.indexOf(e)+1;break;case"WR":a=n.indexOf(e)+1;break;case"TE":a=s.indexOf(e)+1;break;case"K":a=i.indexOf(e)+1;break;case"DST":a=P.indexOf(e)+1}e._Rank=a})},a.averageRank=function(e){var a=0;return e.forEach(function(e){a+=e._Rank}),a=parseFloat(a/e.length),a.toFixed(2)},a.addSalaryImpliedPts=function(){a._AllPlayers.forEach(function(e){e._FPPG=.004*e._Salary,e._FPPG=e._FPPG.toFixed(1),e._FPPG=parseFloat(e._FPPG),a.updatePlayerPtsPerDollar(e)})},a.buildDrafts=function(){if(0==a._QBPlayerPool.length||0==a._RB1PlayerPool.length||0==a._RB2PlayerPool.length||0==a._WR1PlayerPool.length||0==a._WR2PlayerPool.length||0==a._WR3PlayerPool.length||0==a._TEPlayerPool.length||0==a._KPlayerPool.length||0==a._DSTPlayerPool.length)return void a.displayNewMessage("danger","Error: One or more player pools contain zero players");if(a.setPlayerRanking(),a.totalPossibleDraftsToBeCreated=a._QBPlayerPool.length*a._RB1PlayerPool.length*a._RB2PlayerPool.length*a._WR1PlayerPool.length*a._WR2PlayerPool.length*a._WR3PlayerPool.length*a._TEPlayerPool.length*a._KPlayerPool.length*a._DSTPlayerPool.length,!(a.totalPossibleDraftsToBeCreated>1e4)||confirm("Creating "+a.totalPossibleDraftsToBeCreated+" possible drafts can take longer than expected. It can crash your session if loaded with to much memory, save your data. Are you sure you want to create?")){a.clearDrafts();var r=[];if(a._QBPlayerPool.forEach(function(e){var l={};l.QB=e,a._RB1PlayerPool.forEach(function(e){l.RB1=e,a._RB2PlayerPool.forEach(function(e){l.RB2=e,a._WR1PlayerPool.forEach(function(e){l.WR1=e,a._WR2PlayerPool.forEach(function(e){l.WR2=e,a._WR3PlayerPool.forEach(function(e){l.WR3=e,a._TEPlayerPool.forEach(function(e){l.TE=e,a._KPlayerPool.forEach(function(e){l.K=e,a._DSTPlayerPool.forEach(function(e){a.totalPossibleCurrentDraftsCount++,l.DST=e;var t=[];t.push(l.QB),t.push(l.RB1),t.push(l.RB2),t.push(l.WR1),t.push(l.WR2),t.push(l.WR3),t.push(l.TE),t.push(l.K),t.push(l.DST);var n={};if(n.QB=[],n.RB=[],n.WR=[],n.TE=[],n.K=[],n.DST=[],t.forEach(function(e){n[e._Position].push(e)}),a.isDraftTeamValid(t)&&a.isDraftSalaryValid(t)&&!a.doesDraftHaveDupPlayers(t)){var s={FPPG:parseFloat(a.getDraftFPPG(t)),Actual:parseFloat(a.getDraftActual(t)),validTeam:a.isDraftTeamValid(t),validSalary:a.isDraftSalaryValid(t),salaryLeft:parseInt(a.getDraftSalaryLeft(t)),players:t,playerNames:n,playersPositionData:angular.copy(l),displayDetails:!1,pointsPerDollar:parseFloat(a.averageValue(t)),averageRank:parseFloat(a.averageRank(t))};if(o.removeDups){var i=!1;if(r.length>0){for(var P=r.length-1;P>=0;P--){var f=0;if(n.QB.indexOf(r[P].QB[0])!==-1&&f++,n.RB.indexOf(r[P].RB[0])!==-1&&f++,n.RB.indexOf(r[P].RB[1])!==-1&&f++,n.WR.indexOf(r[P].WR[0])!==-1&&f++,n.WR.indexOf(r[P].WR[1])!==-1&&f++,n.WR.indexOf(r[P].WR[2])!==-1&&f++,n.TE.indexOf(r[P].TE[0])!==-1&&f++,n.K.indexOf(r[P].K[0])!==-1&&f++,n.DST.indexOf(r[P].DST[0])!==-1&&f++,9===f){i=!0;break}}i||(a._AllDraftData.push(s),r.push(n))}else a._AllDraftData.push(s),r.push(n)}else a._AllDraftData.push(s),r.push(n)}})})})})})})})})}),e.post("/NFL/buildDraft",{builtDrafts:a._AllDraftData.length}).then(function(e){},function(e){return void 0!==e.data.error?(a._AllDisplayedDraftData=[],a._AllDraftData=[],void a.displayNewMessage("danger","Build Failed, "+e.data.error)):void a.displayNewMessage("danger","Loading Single Saves - Failed")}),a.TotalPossibleDrafts=a._AllDraftData.length,a.TotalValidDrafts=a.TotalPossibleDrafts,a._AllDraftData=l("orderBy")(a._AllDraftData,a.sortTypeDraft,!0),a._AllDisplayedDraftData=[],a._AllDraftData.length>150)for(var t=0;t<150;t++)a._AllDisplayedDraftData.push(a._AllDraftData[t]);else for(var t=0;t<a._AllDraftData.length;t++)a._AllDisplayedDraftData.push(a._AllDraftData[t])}},a.doesDraftHaveDupPlayers=function(e){var a=[],l=!1;return e.forEach(function(e){a.indexOf(e._Name)>-1?l=!0:a.push(e._Name)}),l},a.getDraftSalaryLeft=function(e){var a=6e4;return e.forEach(function(e){a-=e._Salary}),a=parseInt(a)},a.getPlayerPercentInPosition=function(e,l){if(a.TotalValidDrafts>0){var r=0;return a._AllDraftData.forEach(function(a){a.playersPositionData[l]._Name===e._Name&&r++}),(r/a.TotalValidDrafts*100).toFixed(0)}return 0},a.removeAllButTopN=function(){if(a._AllDraftData=l("orderBy")(a._AllDraftData,a.sortTypeDraft,!0),a._AllDraftData.length>o.TopLimit){for(var e=[],r=0;r<o.TopLimit;r++){if(e.push(a._AllDraftData[r]),0===r)for(var t=0;t<a._AllPlayers.length;t++)a._AllPlayers[t]._TimesInDrafts=0,a._AllPlayers[t]._TimesInValidDrafts=0;a._AllDraftData[r].players.forEach(function(e){var l=a._AllPlayers.indexOf(e);a._AllPlayers[l]._TimesInDrafts+=1,a._AllPlayers[l]._TimesInValidDrafts+=1})}a._AllDraftData=e,a.TotalPossibleDrafts=a._AllDraftData.length,a.TotalValidDrafts=a.TotalPossibleDrafts,a._AllPlayers.forEach(function(e){a.setPlayerPercentInDraft(e)}),a._AllDisplayedDraftData=[];for(var n=0;n<o.TopLimit;n++)a._AllDisplayedDraftData.push(a._AllDraftData[n])}},a.selectTopActualPlayers=function(){if(a.clearPlayerPools(),0!==a._AllPlayers.length){for(var e=l("orderBy")(a._AllPlayers,"_ActualFantasyPoints",!0),r=l("removeInjured")(e),t=l("position")(r,"QB"),o=l("position")(r,"RB"),n=l("position")(r,"WR"),s=l("position")(r,"TE"),i=l("position")(r,"K"),P=l("position")(r,"DST"),f=0;f<t.length;f++)0!=f&&1!=f||a.addPlayerToPool(t[f],"QB");for(var f=0;f<o.length;f++)0!=f&&1!=f||a.addPlayerToPool(o[f],"RB1"),1!=f&&2!=f&&3!=f||a.addPlayerToPool(o[f],"RB2");for(var f=0;f<n.length;f++)0!=f&&1!=f&&2!=f||a.addPlayerToPool(n[f],"WR1"),1!=f&&2!=f&&3!=f&&4!=f||a.addPlayerToPool(n[f],"WR2"),2!=f&&3!=f&&4!=f&&5!=f||a.addPlayerToPool(n[f],"WR3");for(var f=0;f<s.length;f++)0!=f&&1!=f||a.addPlayerToPool(s[f],"TE");for(var f=0;f<i.length;f++)0!=f&&1!=f||a.addPlayerToPool(i[f],"K");for(var f=0;f<P.length;f++)0!=f&&1!=f||a.addPlayerToPool(P[f],"DST")}},a.setAndUnsetPosition=function(e){a.SelectedPosition===e||(a.SelectedPosition=e)},a.updatePlayerPtsPerDollar=function(e){var l=a._AllPlayers.indexOf(e);l!==-1&&(a._AllPlayers[l]._ProjectedPointsPerDollar=parseFloat(e._FPPG/e._Salary).toFixed(5),e._ProjectedPointsPerDollar=parseFloat(e._FPPG/e._Salary).toFixed(5))},a.CSVReplace=function(e){var r=e.target.files[0],t="",o=new FileReader;o.onload=function(e){t=o.result;for(var r=t.split(/\r\n|\n/),n=(r[0].split(","),[]),s=1;s<r.length;s++){for(var i=r[s].split(","),P="",f="",c="",d=0;d<i.length;d++)switch(d){case 0:P=i[d].replace('"',"").replace('"',"").trim();break;case 1:f=i[d].replace('"',"").replace('"',"").trim();break;case 2:c=i[d].replace('"',"").replace('"',"").trim()}var y={entry_id:P,contest_id:f,contest_name:c};void 0!==P&&""!==P&&n.push(y)}if(a._AllDraftData.length==n.length){var u=0,_=a._AllDraftData;_=l("checkValidOnly")(_,!0),_=l("orderBy")(_,a.sortTypeDraft,a.sortReverseDraft);var p="data:text/csv;charset=utf-8,";p+="entry_id,contest_id,contest_name,QB,RB,RB,WR,WR,WR,TE,K,D\n";for(var D=0;D<n.length;D++){var h=n[D].contest_id.split("-");if(_[D].players[0].playerID.indexOf(h[0])!==-1){p=p+n[D].entry_id+","+n[D].contest_id+","+n[D].contest_name+",";for(var g="",d=0;d<_[D].players.length;d++)0==d?g+=_[D].players[d].playerID:g=g+","+_[D].players[d].playerID;p=p+g+"\n",u++}else a.$apply(function(){a.displayNewMessage("warning","WARNING: player ID does not contain contest ID, Are you sure you have the correct CSV Replace file?")})}if(u>0){var T=angular.element("<a/>");T.css({display:"none"}),angular.element(document.body).append(T);var R="";a._AllTeams.forEach(function(e){R=0==R.length?e:R+"_"+e}),T.attr({href:encodeURI(p),target:"_blank",download:"CSVReplace_"+R+".csv"})[0].click(),T.remove(),a.$apply(function(){a.displayNewMessage("success","Successfully replaced lineups in CSV")})}}else a.$apply(function(){a.displayNewMessage("danger","ERROR: # drafts: "+a._AllDraftData.length+" != "+n.length+". Both CSV File and Total Drafts must be equal.")})},o.readAsText(r),angular.forEach(angular.element("input[type='file']"),function(e){angular.element(e).val(null)})},a.selectTopFPPGPlayers=function(){if(a.clearPlayerPools(),0!==a._AllPlayers.length){for(var e=l("orderBy")(a._AllPlayers,"_FPPG",!0),r=l("removeInjured")(e),t=l("position")(r,"QB"),o=l("position")(r,"RB"),n=l("position")(r,"WR"),s=l("position")(r,"TE"),i=l("position")(r,"K"),P=l("position")(r,"DST"),f=0;f<t.length;f++)0!=f&&1!=f||a.addPlayerToPool(t[f],"QB");for(var f=0;f<o.length;f++)0!=f&&1!=f||a.addPlayerToPool(o[f],"RB1"),1!=f&&2!=f&&3!=f||a.addPlayerToPool(o[f],"RB2");for(var f=0;f<n.length;f++)0!=f&&1!=f&&2!=f||a.addPlayerToPool(n[f],"WR1"),1!=f&&2!=f&&3!=f&&4!=f||a.addPlayerToPool(n[f],"WR2"),3!=f&&4!=f&&5!=f&&6!=f||a.addPlayerToPool(n[f],"WR3");for(var f=0;f<s.length;f++)0!=f&&1!=f||a.addPlayerToPool(s[f],"TE");for(var f=0;f<i.length;f++)0!=f&&1!=f||a.addPlayerToPool(i[f],"K");for(var f=0;f<P.length;f++)0!=f&&1!=f||a.addPlayerToPool(P[f],"DST")}},a.setDraftSortTypeAndReverse=function(e){if(a.sortTypeDraft=e,a.sortReverseDraft=!a.sortReverseDraft,a._AllDraftData=l("orderBy")(a._AllDraftData,a.sortTypeDraft,a.sortReverseDraft),a._AllDisplayedDraftData=[],a._AllDraftData.length>150)for(var r=0;r<150;r++)a._AllDisplayedDraftData.push(a._AllDraftData[r]);else for(var r=0;r<a._AllDraftData.length;r++)a._AllDisplayedDraftData.push(a._AllDraftData[r])},a.switchValidDraftSelector=function(){a.SelectedValidDrafts=!a.SelectedValidDrafts},a.setPlayerPercentInDraft=function(e){a.SelectedValidDrafts?e._PercentInDrafts=(e._TimesInValidDrafts/a.TotalValidDrafts*100).toFixed(0):e._PercentInDrafts=(e._TimesInDrafts/a.TotalPossibleDrafts*100).toFixed(0)},a.getDraftFPPG=function(e){var a=0;return e.forEach(function(e){a+=e._FPPG}),a=parseFloat(a),a.toFixed(2)},a.getDraftActual=function(e){var a=0;return e.forEach(function(e){a+=e._ActualFantasyPoints}),a=parseFloat(a),a.toFixed(2)},a.openCloseDraftDetails=function(e){r.open({templateUrl:"/js/AngularControllers/modalDraft.html",controller:"DraftModalController",size:"lg",resolve:{draft:function(){return e}}})},a.openClosePlayerDetails=function(e){r.open({templateUrl:"/js/AngularControllers/modalPlayer.html",controller:"PlayerModalController",size:"lg",resolve:{allPlayers:function(){return a._AllPlayersMASTER},selectedPlayer:function(){return e}}})},a.removeCalcDrafts=function(){var e=l("removeCalcDraft")(a._AllDraftData,parseFloat(o.TopRange),parseFloat(o.BottomRange),a.sortTypeDraft);a._AllDraftData=e,a.TotalPossibleDrafts=a._AllDraftData.length;var r=l("checkValidOnly")(a._AllDraftData,!0);if(a.TotalValidDrafts=r.length,a._AllDisplayedDraftData=[],a._AllDraftData.length>150)for(var t=0;t<150;t++)a._AllDisplayedDraftData.push(a._AllDraftData[t]);else for(var t=0;t<a._AllDraftData.length;t++)a._AllDisplayedDraftData.push(a._AllDraftData[t])},a.isDraftSalaryValid=function(e){var a=6e4;return e.forEach(function(e){a-=e._Salary}),a>=0},a.averageValue=function(e){var a=0;return e.forEach(function(e){a=parseFloat(a)+parseFloat(e._ProjectedPointsPerDollar)}),a=parseFloat(a),(a/e.length).toFixed(5)},a.isDraftTeamValid=function(e){var a={};e.forEach(function(e){a.hasOwnProperty(e._Team)?a[e._Team]=a[e._Team]+1:a[e._Team]=1});for(team in a){var l=a[team];if(l>4)return!1}return!0},a.clearAllPlayerFilters=function(){a.SelectedTeam="All",a.SelectedWeeks=[]},a.setDeleteConfirmation=function(e){a.DeleteConfirmationID=e},a.unsetDeleteConfirmation=function(){a.DeleteConfirmationID=-1},a.showDeleteConfirmation=function(e){return a.DeleteConfirmationID==e},a.read=function(l){e.post("/NFL/read",{id:l}).then(function(e){a.currentRead=e.data,a.loadPlayersFromSave(JSON.parse(a.currentRead.userSaveJSON)),a.mainTabHeading="Players - "+a.currentRead.title},function(e){a.displayNewMessage("danger","Loading Single Save - Failed")})},a.updateTitle=function(l,r){e.post("/NFL/updateTitle",{id:l,title:r}).then(function(e){a.displayNewMessage("success","Title Update - Success, Saved: "+r)},function(e){a.displayNewMessage("danger","Title Update - Failed, "+e.data.title)})},a["delete"]=function(l){e.post("/NFL/delete",{id:l}).then(function(e){for(var r=-1,t=0;t<a.savedPastSettings.length;t++)if(a.savedPastSettings[t].id==l){r=t;break}a.savedPastSettings.splice(r,1),a.displayNewMessage("success","Deleting #"+l+" - Success")},function(e){a.displayNewMessage("danger","Deleting - Failed")})},a.loadHistory=function(){e.post("/NFL/loadHistory",{endIndex:a.savedPastSettings.length}).then(function(e){var l=e.data;l.forEach(function(e){a.savedPastSettings.push(e)})},function(e){a.displayNewMessage("danger","Loading More Saves - Failed, "+e.data.error)})},a.loadSavedSettingsDetails=function(){e.post("/NFL/loadSavedSettingsDetails",{endIndex:a.savedPastSettings.length}).then(function(e){var l=e.data;l.forEach(function(e){a.savedPastSettings.push(e)})},function(e){})},a.loadSavedSettings=function(l){e.post("/NFL/loadSavedSettings",{id:l}).then(function(e){var l=JSON.parse(e.data.userSaveJSON);a.loadPlayersFromSave(l)},function(e){})},a.loadPlayersFromSave=function(e){a.clearPlayerPools(),a.clearDrafts(),a.clearAllPlayers(),a.clearAllPlayerFilters(),a._AllPlayers=e._AllPlayers,a._AllPlayersMASTER=e._AllPlayers,o.TopRange=parseFloat(e.TopRange),o.BottomRange=parseFloat(e.BottomRange),o.TopLimit=parseInt(e.TopLimit),a._AllPlayers.forEach(function(l){0==a._AllTeams.length?a._AllTeams.push(l._Team):a._AllTeams.indexOf(l._Team)==-1&&a._AllTeams.push(l._Team),a.loadPlayerInPool(e._QBPlayerPool,l,"QB"),a.loadPlayerInPool(e._RB1PlayerPool,l,"RB1"),a.loadPlayerInPool(e._RB2PlayerPool,l,"RB2"),a.loadPlayerInPool(e._WR1PlayerPool,l,"WR1"),a.loadPlayerInPool(e._WR2PlayerPool,l,"WR2"),a.loadPlayerInPool(e._WR3PlayerPool,l,"WR3"),a.loadPlayerInPool(e._TEPlayerPool,l,"TE"),a.loadPlayerInPool(e._KPlayerPool,l,"K"),a.loadPlayerInPool(e._DSTPlayerPool,l,"DST")}),a.displayNewMessage("success","Previous save loaded successfully.")},a.loadPlayerInPool=function(e,l,r){e.forEach(function(e){e._Name==l._Name&&e._Position==l._Position&&e._Team==l._Team&&a.addPlayerToPool(l,r)})},a.loadPlayerInLocked=function(e,l){e.forEach(function(e){e._Name==l._Name&&e._Position==l._Position&&e._Team==l._Team&&a.lockAndUnLockPlayer(l)})},a.openSaveDialog=function(){a.savedPastSettings=[];var e={_AllPlayers:a._AllPlayers,_QBPlayerPool:a._QBPlayerPool,_RB1PlayerPool:a._RB1PlayerPool,_RB2PlayerPool:a._RB2PlayerPool,_WR1PlayerPool:a._WR1PlayerPool,_WR2PlayerPool:a._WR2PlayerPool,_WR3PlayerPool:a._WR3PlayerPool,_TEPlayerPool:a._TEPlayerPool,_KPlayerPool:a._KPlayerPool,_DSTPlayerPool:a._DSTPlayerPool,TopRange:o.TopRange,BottomRange:o.BottomRange,TopLimit:o.TopLimit},l=r.open({templateUrl:"/js/AngularControllers/saveDialog.html",controller:"SaveModalController",size:"lg",backdrop:"static",resolve:{postObject:function(){return e},currentRead:function(){return a.currentRead},site:function(){return"FanDuel"}}});l.result.then(function(e){a.currentRead=e.readData,a.loadPlayersFromSave(e.postObject),a.mainTabHeading="Players - "+e.title},function(){})}}])}]);